# ğŸ„ BlackCows ì –ì†Œ ê´€ë¦¬ ì‹œìŠ¤í…œ API

> **Flutter ì•±ê³¼ ì—°ë™ë˜ëŠ” ì¢…í•©ì ì¸ ì –ì†Œ ê´€ë¦¬ ë° ê¸°ë¡ ì‹œìŠ¤í…œ REST API ì„œë²„**

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-2.3.1-green.svg)](https://fastapi.tiangolo.com)
[![Firebase](https://img.shields.io/badge/Firebase-Firestore-orange.svg)](https://firebase.google.com)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

BlackCowsëŠ” ë‚™ë†ì—… ì¢…í•© ê´€ë¦¬ ì‹œìŠ¤í…œìœ¼ë¡œ, ì –ì†Œ ì •ë³´ ê´€ë¦¬ì™€ ë‹¤ì–‘í•œ ìƒì„¸ ê¸°ë¡ ê´€ë¦¬ë¥¼ ì§€ì›í•˜ëŠ” RESTful API ì„œë²„ì…ë‹ˆë‹¤. Google, Kakao, Naver SNS ë¡œê·¸ì¸ì„ ì§€ì›í•˜ì—¬ ì‚¬ìš©ì í¸ì˜ì„±ì„ ê·¹ëŒ€í™”í–ˆìŠµë‹ˆë‹¤.

### ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

#### ğŸ® ì –ì†Œ ê¸°ë³¸ ê´€ë¦¬
- âœ… **ì –ì†Œ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ** - ì´í‘œë²ˆí˜¸, ì„¼ì„œë²ˆí˜¸, ê¸°ë³¸ ì •ë³´ ê´€ë¦¬
- âœ… **ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™** - ì´í‘œë²ˆí˜¸ë¡œ ì¶•ì‚°ë¬¼í’ˆì§ˆí‰ê°€ì› API ì¡°íšŒ ë° ìë™ ë“±ë¡
- âœ… **3ë‹¨ê³„ ì –ì†Œ ë“±ë¡ í”Œë¡œìš°** - ì¶•ì‚°ë¬¼ì´ë ¥ì œ ìš°ì„ , ìˆ˜ë™ ë“±ë¡ ëŒ€ì•ˆ
- âœ… **ì¦ê²¨ì°¾ê¸° ì‹œìŠ¤í…œ** - í™ˆí™”ë©´ ë…¸ì¶œìš© ì –ì†Œ ì„ ë³„
- âœ… **ìƒì„¸ ì •ë³´ ê´€ë¦¬** - ì²´ì¤‘, ì‚°ì°¨, ì„±ê²©, ìœ„ì¹˜ ë“± í™•ì¥ ì •ë³´
- âœ… **ê²€ìƒ‰ ë° í†µê³„** - ì´í‘œë²ˆí˜¸ ê²€ìƒ‰, ë†ì¥ë³„ í†µê³„ ì œê³µ

#### ğŸ“Š ìƒì„¸ ê¸°ë¡ ê´€ë¦¬ (10ê°€ì§€ ìœ í˜•)
- ğŸ¥› **ì°©ìœ  ê¸°ë¡** - ì°©ìœ ëŸ‰, ìœ ì§€ë°©, ìœ ë‹¨ë°±, ì²´ì„¸í¬ìˆ˜ ë“± **[í•„ìˆ˜: ì°©ìœ ë‚ ì§œ, ì°©ìœ ëŸ‰]**
- ğŸ’• **ë°œì • ê¸°ë¡** - ë°œì • ê°•ë„, ì§€ì†ì‹œê°„, í–‰ë™ ì§•í›„ ë“±
- ğŸ¯ **ì¸ê³µìˆ˜ì • ê¸°ë¡** - ì¢…ì¶• ì •ë³´, ì •ì•¡ í’ˆì§ˆ, ì„±ê³µ í™•ë¥  ë“±
- ğŸ¤± **ì„ì‹ ê°ì • ê¸°ë¡** - ê°ì • ë°©ë²•, ê²°ê³¼, ë¶„ë§Œì˜ˆì •ì¼ ë“±
- ğŸ‘¶ **ë¶„ë§Œ ê¸°ë¡** - ë¶„ë§Œ ë‚œì´ë„, ì†¡ì•„ì§€ ì •ë³´, í•©ë³‘ì¦ ë“±
- ğŸŒ¾ **ì‚¬ë£Œê¸‰ì—¬ ê¸°ë¡** - ì‚¬ë£Œ ì¢…ë¥˜, ê¸‰ì—¬ëŸ‰, ì²¨ê°€ì œ ë“±
- ğŸ¥ **ê±´ê°•ê²€ì§„ ê¸°ë¡** - ì²´ì˜¨, ì‹¬ë°•ìˆ˜, ì²´í˜•ì ìˆ˜ ë“±
- ğŸ’‰ **ë°±ì‹ ì ‘ì¢… ê¸°ë¡** - ë°±ì‹ ëª…, ì ‘ì¢…ëŸ‰, ë¶€ì‘ìš© ë“±
- âš–ï¸ **ì²´ì¤‘ì¸¡ì • ê¸°ë¡** - ì²´ì¤‘, ì²´ì²™, ì¦ì²´ìœ¨ ë“±
- ğŸ©º **ì¹˜ë£Œ ê¸°ë¡** - ì§„ë‹¨ëª…, ì‚¬ìš©ì•½ë¬¼, ì¹˜ë£Œë¹„ìš© ë“±

#### ğŸ“ ê¸°ë³¸ ê¸°ë¡ ê´€ë¦¬ (4ê°€ì§€ ìœ í˜•)
- ğŸ”„ **ë²ˆì‹ ê¸°ë¡** - ì¸ê³µìˆ˜ì •, ìì—°êµë°°, ë²ˆì‹ ê²°ê³¼ ë“±
- ğŸ¥ **ì§ˆë³‘ ê¸°ë¡** - ì§ˆë³‘ëª…, ì¦ìƒ, ì¹˜ë£Œë‚´ìš©, ì‹¬ê°ë„ ë“±
- ğŸ“Š **ë¶„ë¥˜ë³€ê²½ ê¸°ë¡** - ì –ì†Œ ìƒíƒœ ë³€ê²½ ì´ë ¥, ë³€ê²½ ì‚¬ìœ  ë“±
- ğŸ“‹ **ê¸°íƒ€ ê¸°ë¡** - ìœ„ ë¶„ë¥˜ì— ì†í•˜ì§€ ì•ŠëŠ” íŠ¹ë³„í•œ ê¸°ë¡

#### ğŸ”— ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™ ê¸°ëŠ¥
- âœ… **ì†Œ ê¸°ë³¸ ê°œì²´ì •ë³´** - ì´í‘œë²ˆí˜¸, ì¶œìƒì¼, í’ˆì¢…, ì„±ë³„, ê°œì›”ë ¹ ìë™ê³„ì‚°
- âœ… **ë†ì¥ ë“±ë¡ ì´ë ¥** - ì—¬ëŸ¬ ë†ì¥ ì´ë™ ì´ë ¥ ì¶”ì 
- âœ… **ë„ì¶• ë° í¬ì¥ ì²˜ë¦¬ ì •ë³´** - ë„ì¶•ì¥, ë“±ê¸‰, ê·¼ë‚´ì§€ë°©ë„, ìœ„ìƒê²€ì‚¬ ê²°ê³¼
- âœ… **êµ¬ì œì—­ ë°±ì‹  ì ‘ì¢… ì •ë³´** - ìµœì¢…ì ‘ì¢…ì¼, ì ‘ì¢…ì°¨ìˆ˜, ê²½ê³¼ì¼
- âœ… **ëŸ¼í”¼ìŠ¤í‚¨ ë°±ì‹  ì ‘ì¢… ì •ë³´** - ìµœì¢…ì ‘ì¢…ì¼ ì •ë³´
- âœ… **ë¸Œë£¨ì…€ë¼ ê²€ì‚¬ ì •ë³´** - ê²€ì‚¬ì¼, ê²°ê³¼, ê²½ê³¼ì¼ ìë™ê³„ì‚°
- âœ… **ê²°í•µ ê²€ì‚¬ ì •ë³´** - ê²€ì‚¬ì¼, ê²°ê³¼
- âœ… **ì§ˆë³‘ ì •ë³´** - ì§ˆë³‘ìœ ë¬´ ìƒíƒœ
- âœ… **ìˆ˜ì…ì¶• ì •ë³´** - ìˆ˜ì…êµ­ê°€, ìˆ˜ì…ê²½ê³¼ì›”

#### ğŸ¤– AI ì±—ë´‡ ê¸°ëŠ¥ "ì†Œë‹´ì´" (NEW!)
- âœ… **ë‚™ë†ì—… ì „ë¬¸ AI ì–´ì‹œìŠ¤í„´íŠ¸** - OpenAI GPT-4o-mini ê¸°ë°˜ ì§€ëŠ¥í˜• ëŒ€í™”
- âœ… **LangGraph ëŒ€í™” í”Œë¡œìš°** - ê³ ë„í™”ëœ ì§ˆë¬¸ ë¶„ë¥˜ ë° ì‘ë‹µ ì‹œìŠ¤í…œ
- âœ… **4ê°€ì§€ ì§ˆë¬¸ ë¶„ë¥˜ ì‹œìŠ¤í…œ**:
  - **ë‚™ë† ì§€ì‹ (rag)**: ë‚™ë†ì—… ê´€ë ¨ ì „ë¬¸ ì •ë³´ ì œê³µ
  - **ë†ì¥ ë°ì´í„° (cow_info)**: ì‚¬ìš©ì ëª©ì¥ì˜ ì –ì†Œ ì •ë³´ ë° ê¸°ë¡ ì¡°íšŒ
  - **ì¼ë°˜ ëŒ€í™” (general)**: ì¸ì‚¬, ì¡ë‹´, ì±—ë´‡ ì†Œê°œ ë“±
  - **ë¬´ê´€í•œ ì§ˆë¬¸ (irrelevant)**: ë‚™ë†ê³¼ ë¬´ê´€í•œ ì§ˆë¬¸ì— ëŒ€í•œ ì•ˆë‚´
- âœ… **í•œêµ­ì–´ ì „ìš© ì§€ì›** - ë‚™ë†ì—… ì „ë¬¸ìš©ì–´ì— íŠ¹í™”ëœ í•œêµ­ì–´ ëŒ€í™”
- âœ… **ì±„íŒ…ë°© ê´€ë¦¬** - ê°œë³„ ëŒ€í™”ë°© ìƒì„±, ì´ë ¥ ê´€ë¦¬, ìë™ ì •ë¦¬
- âœ… **ë©”ëª¨ë¦¬ ê¸°ë°˜ ì—°ì† ëŒ€í™”** - ëŒ€í™” ë§¥ë½ì„ ìœ ì§€í•˜ëŠ” ì§€ëŠ¥í˜• ì‘ë‹µ
- âœ… **ë†ì¥ ë°ì´í„° ì—°ë™** - ì‚¬ìš©ìì˜ ì –ì†Œ ì •ë³´ì™€ ê¸°ë¡ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ë§ì¶¤í˜• ë‹µë³€

#### ğŸ” ë³´ì•ˆ ë° ì¸ì¦
- âœ… **JWT ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦** - Access/Refresh Token
- âœ… **SNS ë¡œê·¸ì¸ ì§€ì›** - Google, Kakao, Naver 3ê°œ í”Œë«í¼ ì§€ì›
- âœ… **Firebase Admin SDK ì—°ë™** - Google í† í° ìë™ ê²€ì¦
- âœ… **ë†ì¥ë³„ ë°ì´í„° ê²©ë¦¬** - ë©€í‹°í…Œë„ŒíŠ¸ ì§€ì›
- âœ… **Firebase ë³´ì•ˆ ê·œì¹™** - ë°ì´í„° ì ‘ê·¼ ì œì–´
- âœ… **ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •** - ì´ë©”ì¼ ê¸°ë°˜ í† í° ì‹œìŠ¤í…œ
- âœ… **íšŒì›íƒˆí‡´** - ëª¨ë“  ê´€ë ¨ ë°ì´í„° ì™„ì „ ì‚­ì œ

## ğŸ“¡ ì „ì²´ API ì—”ë“œí¬ì¸íŠ¸

### ğŸ” ì¸ì¦ ê´€ë¦¬ API (`/auth`)

| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/auth/register` | íšŒì›ê°€ì… (ëª©ì¥ë³„ëª… í¬í•¨) | `username`, `user_id`, `email`, `password`, `password_confirm` | ì‚¬ìš©ì ì •ë³´ + ë†ì¥ ì •ë³´ |
| `POST` | `/auth/login` | ë¡œê·¸ì¸ (user_id ê¸°ë°˜) | `user_id`, `password` | `access_token`, `refresh_token`, ì‚¬ìš©ì ì •ë³´ |
| `POST` | `/auth/refresh` | í† í° ê°±ì‹  | `refresh_token` | ìƒˆë¡œìš´ `access_token` |
| `GET` | `/auth/me` | í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ | Bearer Token | í˜„ì¬ ì‚¬ìš©ì ì •ë³´ |
| `POST` | `/auth/find-user-id` | ì•„ì´ë”” ì°¾ê¸° | `username`, `email` | ì°¾ì€ `user_id` |
| `POST` | `/auth/request-password-reset` | ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­ | `username`, `user_id`, `email` | ì´ë©”ì¼ ì „ì†¡ ê²°ê³¼ + ì„ì‹œ í† í° |
| `POST` | `/auth/verify-reset-token` | ì¬ì„¤ì • í† í° ê²€ì¦ | `token` | í† í° ìœ íš¨ì„± ê²°ê³¼ |
| `POST` | `/auth/reset-password` | ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • | `token`, `new_password`, `confirm_password` | ì¬ì„¤ì • ì„±ê³µ ë©”ì‹œì§€ |
| `POST` | `/auth/login-with-reset-token` | ì„ì‹œ í† í° ë¡œê·¸ì¸ | `user_id`, `reset_token` | ì„ì‹œ `access_token` (ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê¶Œí•œ) |
| `POST` | `/auth/change-password` | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ | `new_password`, `confirm_password` + Bearer Token | ë³€ê²½ ì„±ê³µ ë©”ì‹œì§€ |
| `PUT` | `/auth/update-farm-name` | ëª©ì¥ ì´ë¦„ ìˆ˜ì • | `farm_nickname` + Bearer Token | ìˆ˜ì •ëœ ì‚¬ìš©ì ì •ë³´ |
| `DELETE` | `/auth/delete-account` | íšŒì›íƒˆí‡´ | `password`, `confirmation` + Bearer Token | ì‚­ì œ ì™„ë£Œ ë©”ì‹œì§€ |
| `POST` | `/auth/login-debug` | ë¡œê·¸ì¸ ë””ë²„ê¹… | ì›ì‹œ ìš”ì²­ ë°ì´í„° | ë””ë²„ê·¸ ì •ë³´ |

### ğŸ“± SNS ë¡œê·¸ì¸ API (`/sns`)

| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/sns/google/login` | Google ì†Œì…œ ë¡œê·¸ì¸ | `access_token` | JWT Token + ì‚¬ìš©ì ì •ë³´ + ë†ì¥ ì •ë³´ |
| `POST` | `/sns/kakao/login` | Kakao ì†Œì…œ ë¡œê·¸ì¸ | `access_token` | JWT Token + ì‚¬ìš©ì ì •ë³´ + ë†ì¥ ì •ë³´ |
| `POST` | `/sns/naver/login` | Naver ì†Œì…œ ë¡œê·¸ì¸ | `access_token` | JWT Token + ì‚¬ìš©ì ì •ë³´ + ë†ì¥ ì •ë³´ |
| `DELETE` | `/sns/delete-account` | SNS ê³„ì • ì—°ë™ í•´ì œ ë° íƒˆí‡´ | `provider`, `access_token` | ì‚­ì œ ì™„ë£Œ ë©”ì‹œì§€ |

#### SNS ë¡œê·¸ì¸ íŠ¹ì§•
- âœ… **ìë™ ì‚¬ìš©ì ìƒì„±** - ì²« ë¡œê·¸ì¸ ì‹œ ì‚¬ìš©ì ë° ë†ì¥ ì •ë³´ ìë™ ìƒì„±
- âœ… **í† í° ìë™ ê²€ì¦** - ê° í”Œë«í¼ APIë¥¼ í†µí•œ ì•¡ì„¸ìŠ¤ í† í° ìœ íš¨ì„± ê²€ì¦
- âœ… **JWT í† í° ë°œê¸‰** - Access Token + Refresh Token ìë™ ë°œê¸‰
- âœ… **í”„ë¡œí•„ ì •ë³´ ë™ê¸°í™”** - SNS í”„ë¡œí•„ ì •ë³´ë¥¼ ì‚¬ìš©ì ì •ë³´ì— ìë™ ë°˜ì˜
- âœ… **ë†ì¥ ì •ë³´ ìë™ ìƒì„±** - ì²« ë¡œê·¸ì¸ ì‹œ ê¸°ë³¸ ë†ì¥ ì •ë³´ ìë™ ì„¤ì •

**ì§€ì› í”Œë«í¼:**
- **Google**: Firebase Admin SDKë¥¼ í†µí•œ ID Token ê²€ì¦
- **Kakao**: Kakao APIë¥¼ í†µí•œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ë° ê²€ì¦
- **Naver**: Naver APIë¥¼ í†µí•œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ë° ê²€ì¦

### ğŸ® ì –ì†Œ ê´€ë¦¬ API (`/cows`)

#### ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™ API

| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `GET` | `/cows/registration-status/{ear_tag_number}` | ì –ì†Œ ë“±ë¡ ìƒíƒœ í™•ì¸ | `ear_tag_number` + Bearer Token | ë“±ë¡ ìƒíƒœ (already_registered/livestock_trace_available/manual_registration_required) |
| `POST` | `/cows/register-from-livestock-trace` | ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì •ë³´ ê¸°ë°˜ ì –ì†Œ ë“±ë¡ | `ear_tag_number`, `user_provided_name` + Bearer Token | ë“±ë¡ëœ ì –ì†Œ ì •ë³´ + ì¶•ì‚°ë¬¼ì´ë ¥ì œ ë°ì´í„° |

#### ê¸°ë³¸ ì –ì†Œ ê´€ë¦¬ API

| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/cows/manual` | ì –ì†Œ ìˆ˜ë™ ë“±ë¡ | `ear_tag_number`, `name` | ë“±ë¡ëœ ì –ì†Œ ì •ë³´ |
| `POST` | `/cows/` | ì –ì†Œ ë“±ë¡ (ë ˆê±°ì‹œ) | `ear_tag_number`, `name` | ë“±ë¡ëœ ì –ì†Œ ì •ë³´ |
| `GET` | `/cows/` | ì –ì†Œ ëª©ë¡ ì¡°íšŒ | Bearer Token | ë†ì¥ ë‚´ ëª¨ë“  ì –ì†Œ ëª©ë¡ |
| `GET` | `/cows/{cow_id}` | ì –ì†Œ ìƒì„¸ ì¡°íšŒ | `cow_id` + Bearer Token | íŠ¹ì • ì –ì†Œ ìƒì„¸ ì •ë³´ |
| `PUT` | `/cows/{cow_id}` | ì –ì†Œ ì •ë³´ ìˆ˜ì • | `cow_id` + Bearer Token | ìˆ˜ì •ëœ ì –ì†Œ ì •ë³´ |
| `DELETE` | `/cows/{cow_id}` | ì –ì†Œ ì‚­ì œ (ì†Œí”„íŠ¸ ì‚­ì œ) | `cow_id` + Bearer Token | ì‚­ì œ í™•ì¸ ë©”ì‹œì§€ |
| `PATCH` | `/cows/{cow_id}/favorite` | ì¦ê²¨ì°¾ê¸° í† ê¸€ | `cow_id` + Bearer Token | ì¦ê²¨ì°¾ê¸° ìƒíƒœ ë³€ê²½ ê²°ê³¼ |
| `GET` | `/cows/favorites/list` | ì¦ê²¨ì°¾ê¸° ì –ì†Œ ëª©ë¡ | Bearer Token | ì¦ê²¨ì°¾ê¸°ëœ ì –ì†Œë“¤ |
| `GET` | `/cows/search/by-tag/{ear_tag_number}` | ì´í‘œë²ˆí˜¸ë¡œ ì –ì†Œ ê²€ìƒ‰ | `ear_tag_number` + Bearer Token | ê²€ìƒ‰ëœ ì –ì†Œ ì •ë³´ |
| `GET` | `/cows/statistics/summary` | ë†ì¥ í†µê³„ ì¡°íšŒ | Bearer Token | ì „ì²´/ê±´ê°•ìƒíƒœë³„/ë²ˆì‹ìƒíƒœë³„ í†µê³„ |

#### ì –ì†Œ ìƒì„¸ì •ë³´ ê´€ë¦¬ API

| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `PUT` | `/cows/{cow_id}/details` | ì –ì†Œ ìƒì„¸ì •ë³´ ì—…ë°ì´íŠ¸ | `cow_id` + Bearer Token | ì—…ë°ì´íŠ¸ëœ ìƒì„¸ì •ë³´ |
| `GET` | `/cows/{cow_id}/details` | ì –ì†Œ ìƒì„¸ì •ë³´ ì¡°íšŒ | `cow_id` + Bearer Token | ì „ì²´ ìƒì„¸ì •ë³´ í¬í•¨ ì –ì†Œ ë°ì´í„° |
| `GET` | `/cows/{cow_id}/has-details` | ìƒì„¸ì •ë³´ ë³´ìœ  ì—¬ë¶€ í™•ì¸ | `cow_id` + Bearer Token | `has_detailed_info` boolean |
| `GET` | `/cows/{cow_id}/livestock-trace-info` | ì –ì†Œì˜ ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì •ë³´ ì¡°íšŒ | `cow_id` + Bearer Token | ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™ ì •ë³´ |

### ğŸ“ ìƒì„¸ ê¸°ë¡ ê´€ë¦¬ API (`/records`)

#### ğŸ¥› ì°©ìœ  ê¸°ë¡ (í•µì‹¬ ê¸°ëŠ¥)
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/records/milking` | ì°©ìœ  ê¸°ë¡ ìƒì„± | `cow_id`, `record_date`, `milk_yield` | ìƒì„±ëœ ì°©ìœ  ê¸°ë¡ |
| `GET` | `/records/cow/{cow_id}/milking` | ì –ì†Œë³„ ì°©ìœ  ê¸°ë¡ ì¡°íšŒ | `cow_id` + Bearer Token | íŠ¹ì • ì –ì†Œì˜ ì°©ìœ  ê¸°ë¡ ëª©ë¡ |
| `GET` | `/records/milking/recent` | ìµœê·¼ ì°©ìœ  ê¸°ë¡ ì¡°íšŒ | Bearer Token | ë†ì¥ ì „ì²´ ìµœê·¼ ì°©ìœ  ê¸°ë¡ |

#### ğŸ’• ë°œì • ê¸°ë¡
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/records/estrus` | ë°œì • ê¸°ë¡ ìƒì„± | `cow_id`, `record_date` | ìƒì„±ëœ ë°œì • ê¸°ë¡ |

#### ğŸ¯ ì¸ê³µìˆ˜ì • ê¸°ë¡
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/records/insemination` | ì¸ê³µìˆ˜ì • ê¸°ë¡ ìƒì„± | `cow_id`, `record_date` | ìƒì„±ëœ ì¸ê³µìˆ˜ì • ê¸°ë¡ |

#### ğŸ¤± ì„ì‹ ê°ì • ê¸°ë¡
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/records/pregnancy-check` | ì„ì‹ ê°ì • ê¸°ë¡ ìƒì„± | `cow_id`, `record_date` | ìƒì„±ëœ ì„ì‹ ê°ì • ê¸°ë¡ |

#### ğŸ‘¶ ë¶„ë§Œ ê¸°ë¡
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/records/calving` | ë¶„ë§Œ ê¸°ë¡ ìƒì„± | `cow_id`, `record_date` | ìƒì„±ëœ ë¶„ë§Œ ê¸°ë¡ |

#### ğŸŒ¾ ì‚¬ë£Œê¸‰ì—¬ ê¸°ë¡
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/records/feed` | ì‚¬ë£Œê¸‰ì—¬ ê¸°ë¡ ìƒì„± | `cow_id`, `record_date` | ìƒì„±ëœ ì‚¬ë£Œê¸‰ì—¬ ê¸°ë¡ |

#### ğŸ¥ ê±´ê°•ê²€ì§„ ê¸°ë¡
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/records/health-check` | ê±´ê°•ê²€ì§„ ê¸°ë¡ ìƒì„± | `cow_id`, `record_date` | ìƒì„±ëœ ê±´ê°•ê²€ì§„ ê¸°ë¡ |

#### ğŸ’‰ ë°±ì‹ ì ‘ì¢… ê¸°ë¡
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/records/vaccination` | ë°±ì‹ ì ‘ì¢… ê¸°ë¡ ìƒì„± | `cow_id`, `record_date` | ìƒì„±ëœ ë°±ì‹ ì ‘ì¢… ê¸°ë¡ |

#### âš–ï¸ ì²´ì¤‘ì¸¡ì • ê¸°ë¡
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/records/weight` | ì²´ì¤‘ì¸¡ì • ê¸°ë¡ ìƒì„± | `cow_id`, `record_date` | ìƒì„±ëœ ì²´ì¤‘ì¸¡ì • ê¸°ë¡ |

#### ğŸ©º ì¹˜ë£Œ ê¸°ë¡
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/records/treatment` | ì¹˜ë£Œ ê¸°ë¡ ìƒì„± | `cow_id`, `record_date` | ìƒì„±ëœ ì¹˜ë£Œ ê¸°ë¡ |

### ğŸ“‹ ê¸°ë¡ ì¡°íšŒ ë° ê´€ë¦¬ API

| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `GET` | `/records/cow/{cow_id}` | ì –ì†Œë³„ ì „ì²´ ê¸°ë¡ ì¡°íšŒ | `cow_id` + Bearer Token | íŠ¹ì • ì –ì†Œì˜ ëª¨ë“  ê¸°ë¡ ëª©ë¡ |
| `GET` | `/records/{record_id}` | ê¸°ë¡ ìƒì„¸ ì¡°íšŒ | `record_id` + Bearer Token | íŠ¹ì • ê¸°ë¡ì˜ ìƒì„¸ ì •ë³´ |
| `PUT` | `/records/{record_id}` | **ìƒì„¸ ê¸°ë¡ ìˆ˜ì •** | `record_id` + Bearer Token + ìˆ˜ì • ë°ì´í„° | ìˆ˜ì •ëœ ìƒì„¸ ê¸°ë¡ ì •ë³´ |
| `DELETE` | `/records/{record_id}` | ê¸°ë¡ ì‚­ì œ | `record_id` + Bearer Token | ì‚­ì œ í™•ì¸ ë©”ì‹œì§€ |

#### ğŸ“ ìƒì„¸ ê¸°ë¡ ìˆ˜ì • (`PUT /records/{record_id}`)

**ëª¨ë“  íƒ€ì…ì˜ ìƒì„¸ê¸°ë¡ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:**
- ì°©ìœ  ê¸°ë¡, ì‚¬ë£Œê¸‰ì—¬ ê¸°ë¡, ê±´ê°•ê²€ì§„ ê¸°ë¡, ì²´ì¤‘ì¸¡ì • ê¸°ë¡
- ë°±ì‹ ì ‘ì¢… ê¸°ë¡, ì¹˜ë£Œ ê¸°ë¡, ë°œì • ê¸°ë¡, ì¸ê³µìˆ˜ì • ê¸°ë¡
- ì„ì‹ ê°ì • ê¸°ë¡, ë¶„ë§Œ ê¸°ë¡, ê¸°íƒ€ ëª¨ë“  ìƒì„¸ ê¸°ë¡

**ìˆ˜ì • ë°©ë²•:**
- **ê¸°ë³¸ ì •ë³´ ìˆ˜ì •**: `title`, `description`, `record_date`
- **ìƒì„¸ ì •ë³´ ìˆ˜ì •**: `record_data` ê°ì²´ ë‚´ì˜ íŠ¹ì • í•„ë“œë“¤
- **ì„ íƒì  ì—…ë°ì´íŠ¸**: ì…ë ¥í•œ í•„ë“œë§Œ ìˆ˜ì •ë˜ê³  ë‚˜ë¨¸ì§€ëŠ” ê¸°ì¡´ ê°’ ìœ ì§€

**ë¶„ë§Œê¸°ë¡ ìˆ˜ì • ì˜ˆì‹œ:**
```json
PUT /records/{record_id}
{
  "title": "ë¶„ë§Œ ì™„ë£Œ (ìˆ˜ì •ë¨)",
  "record_data": {
    "calf_count": 2,
    "calving_difficulty": "ì•½ê°„ì–´ë ¤ì›€",
    "notes": "ìˆ˜ì •ëœ íŠ¹ì´ì‚¬í•­"
  }
}
```

**ê±´ê°•ê²€ì§„ê¸°ë¡ ìˆ˜ì • ì˜ˆì‹œ:**
```json
PUT /records/{record_id}
{
  "record_date": "2024-01-16",
  "record_data": {
    "body_temperature": 38.7,
    "heart_rate": 72,
    "notes": "ì •ìƒ ë²”ìœ„ ë‚´ ìˆ˜ì¹˜ í™•ì¸"
  }
}
```

### ğŸ“Š í†µê³„ ë° ë¶„ì„ API

| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `GET` | `/records/cow/{cow_id}/milking/statistics` | ì°©ìœ  í†µê³„ | `cow_id` + Bearer Token | ì¼ë³„ ì°©ìœ ëŸ‰, í‰ê· ê°’, ìœ ì„±ë¶„ ë¶„ì„ |
| `GET` | `/records/cow/{cow_id}/weight/trend` | ì²´ì¤‘ ë³€í™” ì¶”ì´ | `cow_id` + Bearer Token | ê¸°ê°„ë³„ ì²´ì¤‘ ì¦ê° ë°ì´í„° |
| `GET` | `/records/cow/{cow_id}/reproduction/timeline` | ë²ˆì‹ íƒ€ì„ë¼ì¸ | `cow_id` + Bearer Token | ë°œì •, ìˆ˜ì •, ì„ì‹ , ë¶„ë§Œ ì´ë ¥ |
| `GET` | `/records/cow/{cow_id}/summary` | ì –ì†Œ ê¸°ë¡ ìš”ì•½ | `cow_id` + Bearer Token | ì –ì†Œë³„ ê¸°ë¡ í˜„í™© ìš”ì•½ |

### ğŸ” ë“±ë¡ë˜ì–´ ìˆëŠ” ì –ì†Œì˜ ìƒì„¸ ì •ë³´ ê¸°ë¡ API

#### ì¹´í…Œê³ ë¦¬ë³„ ê¸°ë¡ ì¡°íšŒ
| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `GET` | `/records/cow/{cow_id}/health-records` | ê±´ê°• ê¸°ë¡ ì¡°íšŒ | `cow_id` + Bearer Token | ê±´ê°•ê²€ì§„, ë°±ì‹ , ì¹˜ë£Œ ê¸°ë¡ |
| `GET` | `/records/cow/{cow_id}/milking-records` | ì°©ìœ  ê¸°ë¡ ì¡°íšŒ | `cow_id` + Bearer Token | ëª¨ë“  ì°©ìœ  ê¸°ë¡ |
| `GET` | `/records/cow/{cow_id}/breeding-records` | ë²ˆì‹ ê¸°ë¡ ì¡°íšŒ | `cow_id` + Bearer Token | ë°œì •, ìˆ˜ì •, ì„ì‹ , ë¶„ë§Œ ê¸°ë¡ |
| `GET` | `/records/cow/{cow_id}/feed-records` | ì‚¬ë£Œê¸‰ì—¬ ê¸°ë¡ ì¡°íšŒ | `cow_id` + Bearer Token | ëª¨ë“  ì‚¬ë£Œê¸‰ì—¬ ê¸°ë¡ |
| `GET` | `/records/cow/{cow_id}/weight-records` | ì²´ì¤‘ì¸¡ì • ê¸°ë¡ ì¡°íšŒ | `cow_id` + Bearer Token | ëª¨ë“  ì²´ì¤‘ì¸¡ì • ê¸°ë¡ |
| `GET` | `/records/cow/{cow_id}/all-records` | ì „ì²´ ê¸°ë¡ ì¡°íšŒ | `cow_id` + Bearer Token | ì –ì†Œì˜ ëª¨ë“  ìƒì„¸ ê¸°ë¡ |

### ğŸ“Š ê¸°ë³¸ ê¸°ë¡ ê´€ë¦¬ API (`/basic-records`)

| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/basic-records/breeding` | ë²ˆì‹ê¸°ë¡ ìƒì„± | `cow_id`, `record_date`, `title`, `breeding_method`, `breeding_date` | ìƒì„±ëœ ë²ˆì‹ê¸°ë¡ |
| `POST` | `/basic-records/disease` | ì§ˆë³‘ê¸°ë¡ ìƒì„± | `cow_id`, `record_date`, `title`, `disease_name` | ìƒì„±ëœ ì§ˆë³‘ê¸°ë¡ |
| `POST` | `/basic-records/status-change` | ë¶„ë¥˜ë³€ê²½ ê¸°ë¡ ìƒì„± | `cow_id`, `record_date`, `title`, `previous_status`, `new_status`, `change_reason`, `change_date` | ìƒì„±ëœ ë¶„ë¥˜ë³€ê²½ ê¸°ë¡ |
| `POST` | `/basic-records/other` | ê¸°íƒ€ê¸°ë¡ ìƒì„± | `cow_id`, `record_date`, `title` | ìƒì„±ëœ ê¸°íƒ€ê¸°ë¡ |
| `GET` | `/basic-records/cow/{cow_id}` | ì –ì†Œë³„ ê¸°ë³¸ ê¸°ë¡ ì¡°íšŒ | `cow_id` + Bearer Token | íŠ¹ì • ì –ì†Œì˜ ê¸°ë³¸ ê¸°ë¡ ëª©ë¡ |
| `GET` | `/basic-records/` | ë†ì¥ ì „ì²´ ê¸°ë³¸ ê¸°ë¡ ì¡°íšŒ | Bearer Token | ë†ì¥ì˜ ëª¨ë“  ê¸°ë³¸ ê¸°ë¡ ëª©ë¡ |
| `GET` | `/basic-records/{record_id}` | ê¸°ë³¸ ê¸°ë¡ ìƒì„¸ ì¡°íšŒ | `record_id` + Bearer Token | íŠ¹ì • ê¸°ë³¸ ê¸°ë¡ì˜ ìƒì„¸ ì •ë³´ |
| `PUT` | `/basic-records/{record_id}` | ê¸°ë³¸ ê¸°ë¡ ì—…ë°ì´íŠ¸ | `record_id` + Bearer Token | ì—…ë°ì´íŠ¸ëœ ê¸°ë³¸ ê¸°ë¡ |
| `DELETE` | `/basic-records/{record_id}` | ê¸°ë³¸ ê¸°ë¡ ì‚­ì œ | `record_id` + Bearer Token | ì‚­ì œ í™•ì¸ ë©”ì‹œì§€ |
| `GET` | `/basic-records/recent/summary` | ìµœê·¼ ê¸°ë¡ ì¡°íšŒ (í™ˆí™”ë©´ìš©) | Bearer Token | ìµœê·¼ ê¸°ë³¸ ê¸°ë¡ ëª©ë¡ |
| `GET` | `/basic-records/statistics/summary` | ê¸°ë³¸ ê¸°ë¡ í†µê³„ | Bearer Token | ê¸°ë¡ ìœ í˜•ë³„ í†µê³„ ì •ë³´ |

### ğŸ”— ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™ API (`/api/livestock-trace`)

#### ì¸ì¦ í•„ìš” API

| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `GET` | `/api/livestock-trace/livestock-trace/{ear_tag_number}` | ì¶•ì‚°ë¬¼ì´ë ¥ì •ë³´ ì „ì²´ ì¡°íšŒ | `ear_tag_number` + Bearer Token | ì „ì²´ ì´ë ¥ì •ë³´ (ê¸°ë³¸ì •ë³´, ë†ì¥ì´ë ¥, ë„ì¶•ì •ë³´, ë°±ì‹ ì •ë³´ ë“±) |
| `GET` | `/api/livestock-trace/livestock-quick-check/{ear_tag_number}` | ê¸°ë³¸ì •ë³´ ë¹ ë¥¸ í™•ì¸ | `ear_tag_number` + Bearer Token | ê¸°ë³¸ ê°œì²´ì •ë³´ë§Œ ë¹ ë¥¸ ì¡°íšŒ |
| `POST` | `/api/livestock-trace/livestock-trace-async/{ear_tag_number}` | ë¹„ë™ê¸° ì „ì²´ì •ë³´ ì¡°íšŒ | `ear_tag_number` + Bearer Token | task_id ë°˜í™˜ (ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬) |
| `GET` | `/api/livestock-trace/livestock-trace-status/{task_id}` | ë¹„ë™ê¸° ì¡°íšŒ ìƒíƒœ í™•ì¸ | `task_id` + Bearer Token | ì§„í–‰ìƒí™© ë° ê²°ê³¼ |

#### ê°œë°œ/í…ŒìŠ¤íŠ¸ìš© API (ì¸ì¦ ë¶ˆí•„ìš”)

| Method | Endpoint | ì„¤ëª… | ì‘ë‹µ |
|--------|----------|------|------|
| `GET` | `/api/livestock-trace/test-quick-check-no-auth/{ear_tag_number}` | í…ŒìŠ¤íŠ¸ìš© ë¹ ë¥¸ ê¸°ë³¸ì •ë³´ í™•ì¸ | ê¸°ë³¸ ê°œì²´ì •ë³´ (ì¸ì¦ ì—†ìŒ) |
| `POST` | `/api/livestock-trace/test-async-no-auth/{ear_tag_number}` | í…ŒìŠ¤íŠ¸ìš© ë¹„ë™ê¸° ì „ì²´ ì¡°íšŒ | task_id ë°˜í™˜ (ì¸ì¦ ì—†ìŒ) |
| `GET` | `/api/livestock-trace/test-status-no-auth/{task_id}` | í…ŒìŠ¤íŠ¸ìš© ì‘ì—… ìƒíƒœ í™•ì¸ | ì§„í–‰ìƒí™© ë° ê²°ê³¼ (ì¸ì¦ ì—†ìŒ) |
| `GET` | `/api/livestock-trace/test-no-auth/{ear_tag_number}` | í…ŒìŠ¤íŠ¸ìš© ì¶•ì‚°ë¬¼ì´ë ¥ì •ë³´ ì¡°íšŒ | ì „ì²´ ì´ë ¥ì •ë³´ (ì¸ì¦ ì—†ìŒ) |
| `GET` | `/api/livestock-trace/test-basic-no-auth/{ear_tag_number}` | í…ŒìŠ¤íŠ¸ìš© ê¸°ë³¸ ì •ë³´ ì¡°íšŒ | ê¸°ë³¸ ê°œì²´ì •ë³´ (ì¸ì¦ ì—†ìŒ) |

### ğŸ¤– AI ì±—ë´‡ API (`/chatbot`) - â­ í•µì‹¬ ê¸°ëŠ¥

| Method | Endpoint | ì„¤ëª… | í•„ìˆ˜ í•„ë“œ | ì‘ë‹µ |
|--------|----------|------|----------|------|
| `POST` | `/chatbot/ask` | **ì±—ë´‡ ì§ˆë¬¸í•˜ê¸°** | `user_id`, `chat_id`, `question` | `answer` |
| `GET` | `/chatbot/rooms/{user_id}` | **ì‚¬ìš©ì ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ** | `user_id` (ê²½ë¡œ) | `chats: [{chat_id, created_at}]` |
| `POST` | `/chatbot/rooms` | **ìƒˆë¡œìš´ ì±„íŒ…ë°© ìƒì„±** | `user_id` | `chats: [{chat_id, created_at}]` |
| `GET` | `/chatbot/history/{chat_id}` | **ì±„íŒ…ë°© ëŒ€í™” ì´ë ¥ ì¡°íšŒ** | `chat_id` (ê²½ë¡œ) | `chat_id`, `messages: [{role, content, timestamp}]` |
| `DELETE` | `/chatbot/rooms/{chat_id}` | **ì±„íŒ…ë°© ë° ë©”ì‹œì§€ ì‚­ì œ** | `chat_id` (ê²½ë¡œ) | `detail: ì‚­ì œ ê²°ê³¼ ë©”ì‹œì§€` |
| `DELETE` | `/chatbot/rooms/expired/auto` | **14ì¼ ì´ìƒëœ ì±„íŒ…ë°© ìë™ ì‚­ì œ** | ì—†ìŒ | `detail: ì‚­ì œ ê²°ê³¼ ë©”ì‹œì§€` |

#### ğŸ¤– AI ì±—ë´‡ "ì†Œë‹´ì´" ìƒì„¸ ê¸°ëŠ¥

**ì†Œë‹´ì´ì˜ íŠ¹ì§•:**
- **ì´ë¦„**: ì†Œë‹´ì´ (ë‚™ë†ì—… ì „ë¬¸ AI ì–´ì‹œìŠ¤í„´íŠ¸)
- **AI ì—”ì§„**: OpenAI GPT-4o-mini
- **í”„ë ˆì„ì›Œí¬**: LangGraph ê¸°ë°˜ ê³ ê¸‰ ëŒ€í™” í”Œë¡œìš° ê´€ë¦¬
- **ì–¸ì–´ ì§€ì›**: í•œêµ­ì–´ ì „ìš© (ë‚™ë†ì—… ì „ë¬¸ìš©ì–´ íŠ¹í™”)

**ì§ˆë¬¸ ìë™ ë¶„ë¥˜ ì‹œìŠ¤í…œ:**

ì†Œë‹´ì´ëŠ” ì‚¬ìš©ìì˜ ì§ˆë¬¸ì„ ë‹¤ìŒ 4ê°€ì§€ë¡œ ìë™ ë¶„ë¥˜í•˜ì—¬ ìµœì ì˜ ì‘ë‹µì„ ì œê³µí•©ë‹ˆë‹¤:

1. **rag (ë‚™ë† ì§€ì‹ ì§ˆë¬¸)**
   - ë‚™ë†ì—… ê´€ë ¨ ì „ë¬¸ ì •ë³´, ê¸°ìˆ , ì •ì±…, ìš©ì–´ ë“±
   - ì˜ˆì‹œ: "ì –ì†Œì˜ ë°œì • ì£¼ê¸°ëŠ”?", "ì°©ìœ ê¸°ëŠ” ì–´ë–»ê²Œ ì‘ë™í•˜ë‚˜ìš”?", "ë‚™ë†ì—… ì—­ì‚¬ ì•Œë ¤ì¤˜"

2. **cow_info (ë†ì¥ ë°ì´í„° ì§ˆë¬¸)**
   - ì‚¬ìš©ìì˜ ë†ì¥ì— ë“±ë¡ëœ ì†Œ ì •ë³´ë‚˜ ìƒíƒœ, ê¸°ë¡ ë“±
   - ì˜ˆì‹œ: "103ë²ˆ ì†Œ ìƒíƒœ ì•Œë ¤ì¤˜", "ì–´ì œ ë¶„ë§Œí•œ ì†Œë“¤ ëˆ„êµ¬ì•¼?", "ì´í‘œë²ˆí˜¸ 002123456789 ì†Œ ì •ë³´"

3. **general (ì¼ë°˜ ëŒ€í™”)**
   - ì±—ë´‡ ìì²´ì— ëŒ€í•œ ì§ˆë¬¸, ì¸ì‚¬, ê°ì • í‘œí˜„, ì¡ë‹´ ë“±
   - ì˜ˆì‹œ: "ì•ˆë…•", "ì´ì „ ì§ˆë¬¸ ë­ì˜€ì§€?", "ì†Œë‹´ì´ ê·€ì—½ë‹¤", "ê³ ë§ˆì›Œ", "ë„ˆ ëˆ„êµ¬ì•¼?"

4. **irrelevant (ë¬´ê´€í•œ ì§ˆë¬¸)**
   - ë‚™ë†ì—… ë˜ëŠ” ì‚¬ìš©ìì˜ ëª©ì¥ê³¼ ì™„ì „íˆ ë¬´ê´€í•œ ì§ˆë¬¸
   - ì˜ˆì‹œ: "ë¡œë˜ ë²ˆí˜¸ ì•Œë ¤ì¤˜", "ìš”ì¦˜ ì£¼ì‹ ì–´ë•Œìš”?", "ì˜¤ëŠ˜ ì ì‹¬ ë­ ë¨¹ì§€?"

**AI ì±—ë´‡ ì‚¬ìš© ë°©ë²•:**

```javascript
// 1. ìƒˆ ì±„íŒ…ë°© ìƒì„±
POST /chatbot/rooms
{
  "user_id": "user123"
}

// 2. ì§ˆë¬¸í•˜ê¸°
POST /chatbot/ask
{
  "user_id": "user123",
  "chat_id": "chat-uuid-123",
  "question": "ì –ì†Œ ë°œì • ì¦ìƒì´ ë­”ê°€ìš”?"
}

// 3. ëŒ€í™” ì´ë ¥ ì¡°íšŒ
GET /chatbot/history/chat-uuid-123

// 4. ì‚¬ìš©ìì˜ ëª¨ë“  ì±„íŒ…ë°© ì¡°íšŒ
GET /chatbot/rooms/user123
```

**AI ì±—ë´‡ ì‘ë‹µ ì˜ˆì‹œ:**

- **ë‚™ë† ì§€ì‹ ì§ˆë¬¸**: "ì –ì†Œì˜ ë°œì • ì£¼ê¸°ëŠ” í‰ê·  21ì¼ì…ë‹ˆë‹¤. ë°œì • ì¦ìƒìœ¼ë¡œëŠ” ë‹¤ë¥¸ ì†Œì—ê²Œ ì˜¬ë¼íƒ€ê±°ë‚˜, ë¶ˆì•ˆí•´í•˜ë©° ìš¸ìŒì†Œë¦¬ë¥¼ ë‚´ëŠ” í–‰ë™ì„ ë³´ì…ë‹ˆë‹¤..."

- **ë†ì¥ ë°ì´í„° ì§ˆë¬¸**: "ê½ƒë¶„ì´(002123456789) ì†Œì˜ ìµœê·¼ ì°©ìœ  ê¸°ë¡: ì°©ìœ ëŸ‰ 25.5L, 1íšŒì°¨, ìœ ì§€ë°© 3.8% (ë‚ ì§œ: 2025-06-27)"

- **ì¼ë°˜ ëŒ€í™”**: "ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ë‚™ë†ì—… ë„ìš°ë¯¸ ì†Œë‹´ì´ì˜ˆìš”. ì –ì†Œ ê´€ë¦¬ë‚˜ ë‚™ë†ì—…ì— ê´€í•œ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ë¬¼ì–´ë³´ì„¸ìš”!"

### ğŸ”§ ì‹œìŠ¤í…œ ì •ë³´ API

| Method | Endpoint | ì„¤ëª… | ì‘ë‹µ |
|--------|----------|------|------|
| `GET` | `/` | ì„œë²„ ì •ë³´ ë° ìƒíƒœ | ì„œë²„ ë²„ì „, í™˜ê²½, ê¸°ëŠ¥ ëª©ë¡ |
| `GET` | `/health` | í—¬ìŠ¤ ì²´í¬ | ì„œë²„ ìƒíƒœ, ë²„ì „, Swagger UI ì •ë³´ |

### ğŸ› ï¸ ê°œë°œ í™˜ê²½ ì „ìš© API

**ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥** (`ENVIRONMENT=development`)

| Method | Endpoint | ì„¤ëª… | ì‘ë‹µ |
|--------|----------|------|------|
| `GET` | `/docs` | Swagger UI | ì¸í„°ë™í‹°ë¸Œ API ë¬¸ì„œ |
| `GET` | `/redoc` | ReDoc | ëŒ€ì•ˆ API ë¬¸ì„œ |
| `GET` | `/openapi.json` | OpenAPI ìŠ¤í‚¤ë§ˆ | JSON í˜•íƒœì˜ API ìŠ¤í‚¤ë§ˆ |
| `GET` | `/openapi-download` | OpenAPI ë‹¤ìš´ë¡œë“œ | ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•œ JSON íŒŒì¼ |

## ğŸ”— ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™ ë“±ë¡ í”Œë¡œìš°

### 3ë‹¨ê³„ ì –ì†Œ ë“±ë¡ í”„ë¡œì„¸ìŠ¤

```
                        1ë‹¨ê³„: ì´í‘œë²ˆí˜¸ ì…ë ¥
                                  â†“
              GET /cows/registration-status/{ear_tag_number}
                                  â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                         â†“                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ already_registered â”‚ â”‚ livestock_trace_  â”‚  â”‚manual_registrationâ”‚
â”‚                   â”‚  â”‚    available      â”‚  â”‚     _required     â”‚
â”‚                   â”‚  â”‚                   â”‚  â”‚                   â”‚
â”‚ ì´ë¯¸ ë“±ë¡ëœ ì –ì†Œ  â”‚  â”‚  ì¶•ì‚°ë¬¼ì´ë ¥ì œì—ì„œ â”‚  â”‚  ì¶•ì‚°ë¬¼ì´ë ¥ì œì—ì„œ â”‚
â”‚    (ë“±ë¡ ë¶ˆê°€)    â”‚  â”‚     ì •ë³´ ì°¾ìŒ     â”‚  â”‚     ì •ë³´ ì—†ìŒ     â”‚
â”‚                   â”‚  â”‚                   â”‚  â”‚                   â”‚
â”‚  âŒ ì˜¤ë¥˜ ë©”ì‹œì§€  â”‚  â”‚         â†“         â”‚  â”‚         â†“         â”‚
â”‚                   â”‚  â”‚                   â”‚  â”‚                   â”‚
â”‚                   â”‚  â”‚ POST /cows/       â”‚  â”‚ POST /cows/manual â”‚
â”‚                   â”‚  â”‚ register-from-    â”‚  â”‚                   â”‚
â”‚                   â”‚  â”‚ livestock-trace   â”‚  â”‚                   â”‚
â”‚                   â”‚  â”‚                   â”‚  â”‚                   â”‚
â”‚                   â”‚  â”‚(ì¶•ì‚°ë¬¼ì´ë ¥ì œ ê¸°ë°˜ â”‚  â”‚ (ì‚¬ìš©ì ì§ì ‘ ì…ë ¥ â”‚
â”‚                   â”‚  â”‚     ìë™ ë“±ë¡)    â”‚  â”‚    ìˆ˜ë™ ë“±ë¡)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â†“                      â†“
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â†“
                                       ë“±ë¡ ì™„ë£Œ ì„±ê³µ
                                            â†“
                                       GET /cows/
                                     (ì –ì†Œ ëª©ë¡ ì¡°íšŒ)
```

### ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì¡°íšŒ ì •ë³´

**ê¸°ë³¸ ê°œì²´ì •ë³´ (optionNo=1)**
- ê°œì²´ë²ˆí˜¸, ì´í‘œë²ˆí˜¸, ì¶œìƒì¼, í’ˆì¢…, ì„±ë³„
- ê°œì›”ë ¹ ìë™ê³„ì‚°, ìˆ˜ì…ê²½ê³¼ì›”, ìˆ˜ì…êµ­ê°€
- ë†ì¥ì‹ë³„ë²ˆí˜¸, ë†ì¥ë²ˆí˜¸
- ëŸ¼í”¼ìŠ¤í‚¨ ìµœì¢…ì ‘ì¢…ì¼

**ë†ì¥ ë“±ë¡ ì •ë³´ (optionNo=2)**
- ì‚¬ìœ¡ì§€ ì£¼ì†Œ, ë†ì¥ê²½ì˜ìëª…
- ì‹ ê³ êµ¬ë¶„, ì‹ ê³ ë…„ì›”ì¼, ë†ì¥ë²ˆí˜¸
- ì—¬ëŸ¬ ë†ì¥ ì´ë™ ì´ë ¥ ì¶”ì 

**ë„ì¶• ì •ë³´ (optionNo=3)**
- ë„ì¶•ì¥ ì£¼ì†Œ/ëª…, ë„ì¶•ì¼ì
- ë“±ê¸‰, ê·¼ë‚´ì§€ë°©ë„, ìœ„ìƒê²€ì‚¬ ê²°ê³¼

**í¬ì¥ ì •ë³´ (optionNo=4)**
- í¬ì¥ì²˜ë¦¬ì—…ì†Œ ì£¼ì†Œ/ëª…

**êµ¬ì œì—­ ë°±ì‹  ì •ë³´ (optionNo=5)**
- êµ¬ì œì—­ ë°±ì‹ ì ‘ì¢…ê²½ê³¼ì¼/ì ‘ì¢…ì¼/ì ‘ì¢…ì°¨ìˆ˜

**ì§ˆë³‘ ì •ë³´ (optionNo=6)**
- ì§ˆë³‘ìœ ë¬´ ìƒíƒœ

**ë¸Œë£¨ì…€ë¼/ê²°í•µ ê²€ì‚¬ ì •ë³´ (optionNo=7)**
- ë¸Œë£¨ì…€ë¼: ê²€ì‚¬ì¼, ê²°ê³¼, ê²½ê³¼ì¼ ìë™ê³„ì‚°
- ê²°í•µ: ê²€ì‚¬ì¼, ê²°ê³¼

## ğŸ¤– AI ì±—ë´‡ "ì†Œë‹´ì´" ê¸°ìˆ  ìƒì„¸

### LangGraph ê¸°ë°˜ ëŒ€í™” í”Œë¡œìš°

ì†Œë‹´ì´ëŠ” ìµœì‹  LangGraph ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ì§€ëŠ¥í˜• ëŒ€í™” í”Œë¡œìš°ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤:

```python
# ëŒ€í™” í”Œë¡œìš° ì˜ˆì‹œ
user_question -> ì§ˆë¬¸_ë¶„ë¥˜ -> 
â”Œâ”€ rag: ë‚™ë† ì§€ì‹ ê²€ìƒ‰ + RAG ì‘ë‹µ
â”œâ”€ cow_info: ë†ì¥ ë°ì´í„° ì¡°íšŒ + ë§ì¶¤ ì‘ë‹µ  
â”œâ”€ general: ì¼ë°˜ ëŒ€í™” ì‘ë‹µ
â””â”€ irrelevant: ì•ˆë‚´ ë©”ì‹œì§€
```

### ì§ˆë¬¸ ë¶„ë¥˜ ì‹œìŠ¤í…œ

**ìë™ ë¶„ë¥˜ ë¡œì§:**
1. **ì˜ë„ ë¶„ì„**: ì‚¬ìš©ì ì§ˆë¬¸ì˜ ì˜ë„ë¥¼ íŒŒì•…
2. **í‚¤ì›Œë“œ ë§¤ì¹­**: ë‚™ë†ì—… ì „ë¬¸ìš©ì–´ ë° ë†ì¥ ë°ì´í„° í‚¤ì›Œë“œ ê°ì§€
3. **ì»¨í…ìŠ¤íŠ¸ ì´í•´**: ì´ì „ ëŒ€í™” ë§¥ë½ ê³ ë ¤
4. **ìµœì  ê²½ë¡œ ì„ íƒ**: 4ê°€ì§€ ì‘ë‹µ ê²½ë¡œ ì¤‘ ìµœì  ì„ íƒ

### ë†ì¥ ë°ì´í„° ì—°ë™

**ì´í‘œë²ˆí˜¸ ì¸ì‹:**
- 12ìë¦¬ ìˆ«ì íŒ¨í„´ ìë™ ì¸ì‹
- ì‚¬ìš©ì ë†ì¥ì˜ ì –ì†Œ ì •ë³´ ì‹¤ì‹œê°„ ì¡°íšŒ
- ê¸°ë¡ ìœ í˜•ë³„ í•„í„°ë§ (ì°©ìœ , ë°œì •, ê±´ê°• ë“±)

**ì˜ˆì‹œ ì§ˆë¬¸ê³¼ ì‘ë‹µ:**
```
ì‚¬ìš©ì: "002123456789ë²ˆ ì†Œ ì–´ì œ ì°©ìœ ëŸ‰ ì–´ë• ì–´?"
ì†Œë‹´ì´: "ê½ƒë¶„ì´(002123456789) ì†Œì˜ ìµœê·¼ ì°©ìœ  ê¸°ë¡ì„ í™•ì¸í•´ë“œë¦´ê²Œìš”. 
        ì–´ì œ ì°©ìœ ëŸ‰ì€ 24.2Lì´ê³ , ìœ ì§€ë°© 3.9%, ìœ ë‹¨ë°± 3.1%ì˜€ìŠµë‹ˆë‹¤."
```

### ë©”ëª¨ë¦¬ ê´€ë¦¬

**ëŒ€í™” ë§¥ë½ ìœ ì§€:**
- ì±„íŒ…ë°©ë³„ ëŒ€í™” ì´ë ¥ ì €ì¥
- ì´ì „ ì§ˆë¬¸-ë‹µë³€ ì°¸ì¡° ê°€ëŠ¥
- ì—°ì†ì ì¸ ëŒ€í™” í”Œë¡œìš° ì§€ì›

**ìë™ ì •ë¦¬:**
- 14ì¼ ì´ìƒëœ ì±„íŒ…ë°© ìë™ ì‚­ì œ
- ë©”ëª¨ë¦¬ ìµœì í™” ê´€ë¦¬

## ğŸ“š API ë¬¸ì„œ ë° ê°œë°œ ë„êµ¬

### ğŸ”§ ë¡œì»¬ ê°œë°œí™˜ê²½ì—ì„œ Swagger UI ì‚¬ìš©

ë¡œì»¬ ê°œë°œ ì‹œì—ëŠ” Swagger UIë¥¼ í™œìš©í•˜ì—¬ APIë¥¼ ì‰½ê²Œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# ê°œë°œ í™˜ê²½ìœ¼ë¡œ ì„œë²„ ì‹¤í–‰
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

**ë¡œì»¬ ê°œë°œ ì‹œ ì ‘ì† ê°€ëŠ¥í•œ ë¬¸ì„œ:**
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc  
- **OpenAPI JSON**: http://localhost:8000/openapi.json
- **OpenAPI ë‹¤ìš´ë¡œë“œ**: http://localhost:8000/openapi-download

## ğŸ§ª API í…ŒìŠ¤íŠ¸

> **âš ï¸ ì¤‘ìš”**: AWS EC2 ì‚¬ìš©ëŸ‰ ì ˆì•½ì„ ìœ„í•´ í”„ë¡œë•ì…˜ì—ì„œëŠ” Swagger UIê°€ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. curl ëª…ë ¹ì–´ë‚˜ Postmanì„ ì‚¬ìš©í•˜ì—¬ APIë¥¼ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.

### AI ì±—ë´‡ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ

```bash
# 1. ìƒˆ ì±„íŒ…ë°© ìƒì„±
curl -X POST "http://localhost:8000/chatbot/rooms" \
  -H "Content-Type: application/json" \
  -d '{"user_id": "test_user"}'

# 2. ë‚™ë† ì§€ì‹ ì§ˆë¬¸
curl -X POST "http://localhost:8000/chatbot/ask" \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "test_user",
    "chat_id": "chat_uuid_123",
    "question": "ì –ì†Œ ë°œì • ì¦ìƒì´ ë­”ê°€ìš”?"
  }'

# 3. ë†ì¥ ë°ì´í„° ì§ˆë¬¸ (ì´í‘œë²ˆí˜¸ í¬í•¨)
curl -X POST "http://localhost:8000/chatbot/ask" \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "test_user", 
    "chat_id": "chat_uuid_123",
    "question": "002123456789ë²ˆ ì†Œ ìµœê·¼ ì°©ìœ ëŸ‰ ì•Œë ¤ì¤˜"
  }'

# 4. ëŒ€í™” ì´ë ¥ ì¡°íšŒ
curl -X GET "http://localhost:8000/chatbot/history/chat_uuid_123"
```

## ğŸ”§ ì„¤ì¹˜ ë° ì‹¤í–‰

### í™˜ê²½ ìš”êµ¬ì‚¬í•­
- **Python**: 3.11 ì´ìƒ
- **Firebase**: Firestore ë°ì´í„°ë² ì´ìŠ¤
- **ì¶•ì‚°ë¬¼ì´ë ¥ì œ**: ì¶•ì‚°ë¬¼í’ˆì§ˆí‰ê°€ì› OpenAPI í‚¤
- **OpenAI**: GPT-4o-mini API í‚¤ (ì±—ë´‡ ê¸°ëŠ¥)

### 1ï¸âƒ£ í”„ë¡œì íŠ¸ ì„¤ì •

```bash
# ë ˆí¬ì§€í† ë¦¬ í´ë¡ 
git clone https://github.com/BlackCows-Team/blackcows-server.git
cd blackcows-server

# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt
```

### 2ï¸âƒ£ í™˜ê²½ë³€ìˆ˜ ì„¤ì •

```bash
# .env íŒŒì¼ ìƒì„±
JWT_SECRET_KEY=your_secret_key_here
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
LIVESTOCK_TRACE_API_DECODING_KEY=your_livestock_api_key
OPENAI_API_KEY=your_openai_api_key  # AI ì±—ë´‡ìš©
```

### 3ï¸âƒ£ ì„œë²„ ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰ (Swagger UI í¬í•¨)
ENVIRONMENT=development uvicorn main:app --reload --host 0.0.0.0 --port 8000

# í”„ë¡œë•ì…˜ ì„œë²„ ì‹¤í–‰ (Swagger UI ë¹„í™œì„±í™”)
ENVIRONMENT=production uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4
```

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ğŸ® ì –ì†Œ ì •ë³´ ì»¬ë ‰ì…˜: `cows`
```json
{
  "id": "uuid",
  "ear_tag_number": "012345678912",
  "name": "ê½ƒë¶„ì´",
  "birthdate": "2022-03-15",
  "sensor_number": "1234567890123",
  "health_status": "normal",
  "breeding_status": "lactating",
  "breed": "Holstein",
  "notes": "ìš°ìˆ˜í•œ ì –ì†Œ",
  "is_favorite": true,
  "farm_id": "farm_uuid",
  "owner_id": "user_uuid",
  "has_detailed_info": true,
  "detailed_info": {
    "body_info": {
      "weight": 450.5,
      "body_condition_score": 3.5
    },
    "management_info": {
      "purchase_price": 2500000,
      "barn_section": "Aë™"
    }
  },
  "livestock_trace_data": {
    "basic_info": {
      "cattle_no": "KR123456789",
      "birth_date": "2022-03-15",
      "breed": "í™€ìŠ¤íƒ€ì¸",
      "gender": "ì•”ì»·"
    }
  },
  "registered_from_livestock_trace": true,
  "livestock_trace_registered_at": "timestamp",
  "created_at": "timestamp",
  "updated_at": "timestamp",
  "is_active": true
}
```

### ğŸ¤– AI ì±—ë´‡ ë°ì´í„° êµ¬ì¡°

#### ì±„íŒ…ë°© ì»¬ë ‰ì…˜: `chat_rooms`
```json
{
  "chat_id": "uuid",
  "user_id": "user_uuid", 
  "created_at": "timestamp"
}
```

#### ë©”ì‹œì§€ ì„œë¸Œì»¬ë ‰ì…˜: `chat_rooms/{chat_id}/messages`
```json
{
  "role": "user|assistant",
  "content": "ë©”ì‹œì§€ ë‚´ìš©",
  "timestamp": "timestamp"
}
```

### ğŸ“ ìƒì„¸ ê¸°ë¡ ì»¬ë ‰ì…˜: `cow_detailed_records`
```json
{
  "id": "uuid",
  "cow_id": "cow_uuid",
  "record_type": "milking",
  "record_date": "2025-06-22",
  "title": "ì°©ìœ  ê¸°ë¡ (25.5L, 1íšŒì°¨)",
  "description": "ìœ ì§€ë°© 3.8%, ìœ ë‹¨ë°± 3.2%, ì²´ì„¸í¬ìˆ˜ 150,000",
  "record_data": {
    "milk_yield": 25.5,
    "milking_session": 1,
    "milking_start_time": "06:00:00",
    "milking_end_time": "06:20:00",
    "fat_percentage": 3.8,
    "protein_percentage": 3.2,
    "somatic_cell_count": 150000,
    "temperature": 37.5,
    "conductivity": 5.2,
    "blood_flow_detected": false,
    "color_value": "ì •ìƒ",
    "air_flow_value": 2.1,
    "lactation_number": 3,
    "rumination_time": 480,
    "collection_code": "AUTO",
    "collection_count": 1,
    "notes": null
  },
  "farm_id": "farm_uuid",
  "owner_id": "user_uuid",
  "created_at": "timestamp",
  "updated_at": "timestamp",
  "is_active": true
}
```

### ğŸ“Š ê¸°ë³¸ ê¸°ë¡ ì»¬ë ‰ì…˜: `cow_records`
```json
{
  "id": "uuid",
  "cow_id": "cow_uuid",
  "record_type": "breeding",
  "record_date": "2025-06-22",
  "title": "ì¸ê³µìˆ˜ì • ì‹¤ì‹œ",
  "description": "í™€ìŠ¤íƒ€ì¸ ì •ì•¡ ì‚¬ìš©",
  "record_data": {
    "breeding_method": "artificial",
    "breeding_date": "2025-06-22",
    "bull_info": "í™€ìŠ¤íƒ€ì¸ ìš°ìˆ˜ ì¢…ì¶•",
    "expected_calving_date": "2026-03-30",
    "breeding_result": "pending",
    "cost": 50000,
    "veterinarian": "ê¹€ìˆ˜ì˜ì‚¬"
  },
  "farm_id": "farm_uuid",
  "owner_id": "user_uuid",
  "created_at": "timestamp",
  "updated_at": "timestamp",
  "is_active": true
}
```

### ğŸ‘¥ ì‚¬ìš©ì ì •ë³´ ì»¬ë ‰ì…˜: `users`
```json
{
  "id": "uuid",
  "username": "í™ê¸¸ë™",
  "user_id": "admin123",
  "email": "admin@farm.com",
  "farm_nickname": "í–‰ë³µë†ì¥",
  "farm_id": "farm_uuid",
  "hashed_password": "bcrypt_hash",
  "is_active": true,
  "created_at": "timestamp",
  "updated_at": "timestamp"
}
```

### ğŸ¢ ë†ì¥ ì •ë³´ ì»¬ë ‰ì…˜: `farms`
```json
{
  "farm_id": "farm_uuid",
  "farm_nickname": "í–‰ë³µë†ì¥",
  "owner_id": "user_uuid",
  "owner_name": "í™ê¸¸ë™",
  "owner_user_id": "admin123",
  "created_at": "timestamp",
  "is_active": true
}
```

## ğŸ” ì¸ì¦ ë° ë³´ì•ˆ

### JWT í† í° ì‹œìŠ¤í…œ
- **Access Token**: 30ë¶„ ë§Œë£Œ, API í˜¸ì¶œì— ì‚¬ìš©
- **Refresh Token**: 7ì¼ ë§Œë£Œ, Access Token ê°±ì‹ ì— ì‚¬ìš©
- **Password Reset Token**: 1ì‹œê°„ ë§Œë£Œ, ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì „ìš©
- **Password Reset Access Token**: 30ë¶„ ë§Œë£Œ, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê¶Œí•œë§Œ

### ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • í”Œë¡œìš°
1. ì‚¬ìš©ìê°€ ì´ë¦„, ì•„ì´ë””, ì´ë©”ì¼ ì…ë ¥
2. ì„œë²„ì—ì„œ ì‚¬ìš©ì í™•ì¸ í›„ JWT í† í° ìƒì„±
3. ì´ë©”ì¼ë¡œ ì¬ì„¤ì • ë§í¬ ë°œì†¡
4. ì‚¬ìš©ìê°€ ì„ì‹œ í† í°ìœ¼ë¡œ ë¡œê·¸ì¸
5. ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½
6. ëª¨ë“  ê¸°ì¡´ ë¦¬í”„ë ˆì‹œ í† í° ë¬´íš¨í™”

### ë°ì´í„° ë³´ì•ˆ
- ë†ì¥ë³„ ë°ì´í„° ì™„ì „ ê²©ë¦¬
- ì†Œí”„íŠ¸ ì‚­ì œë¡œ ë°ì´í„° ë¬´ê²°ì„± ìœ ì§€
- bcrypt ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
- Firebase Security Rules ì ìš©
- ì¶•ì‚°ë¬¼ì´ë ¥ì œ API í‚¤ ë³´ì•ˆ ê´€ë¦¬

## ğŸ”— ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™ ìƒì„¸

### API ì—°ë™ ë°©ì‹
- **ê¸°ê´€**: ì¶•ì‚°ë¬¼í’ˆì§ˆí‰ê°€ì› (EKAPE)
- **API íƒ€ì…**: REST API (XML ì‘ë‹µ)
- **ì¸ì¦**: Service Key ê¸°ë°˜
- **URL**: `http://data.ekape.or.kr/openapi-data/service/user/animalTrace/traceNoSearch`

### ì¡°íšŒ ì˜µì…˜ë³„ ì •ë³´

| optionNo | ì¡°íšŒ ì •ë³´ | ì£¼ìš” ë°ì´í„° |
|----------|-----------|-------------|
| 1 | ê¸°ë³¸ ê°œì²´ì •ë³´ | ê°œì²´ë²ˆí˜¸, ì¶œìƒì¼, í’ˆì¢…, ì„±ë³„, ê°œì›”ë ¹ |
| 2 | ë†ì¥ ë“±ë¡ ì •ë³´ | ì‚¬ìœ¡ì§€, ë†ì¥ê²½ì˜ì, ì‹ ê³ ì´ë ¥ |
| 3 | ë„ì¶• ì •ë³´ | ë„ì¶•ì¥, ë“±ê¸‰, ê·¼ë‚´ì§€ë°©ë„ |
| 4 | í¬ì¥ ì •ë³´ | í¬ì¥ì²˜ë¦¬ì—…ì†Œ |
| 5 | êµ¬ì œì—­ ë°±ì‹  | ì ‘ì¢…ì¼, ì°¨ìˆ˜, ê²½ê³¼ì¼ |
| 6 | ì§ˆë³‘ ì •ë³´ | ì§ˆë³‘ìœ ë¬´ |
| 7 | ë¸Œë£¨ì…€ë¼/ê²°í•µ | ê²€ì‚¬ì¼, ê²°ê³¼, ê²½ê³¼ì¼ |

## ğŸ“ˆ ì£¼ìš” ì—…ë°ì´íŠ¸ ë‚´ì—­

### v2.7.0 (2025-06-27) - ğŸ¤– AI ì±—ë´‡ "ì†Œë‹´ì´" ì™„ì „ì²´ (NEW!)
#### ğŸ¤– AI ì±—ë´‡ ê¸°ëŠ¥ ì™„ì „ êµ¬í˜„
- **LangGraph ê¸°ë°˜ ì§€ëŠ¥í˜• ëŒ€í™” ì‹œìŠ¤í…œ**: ê³ ê¸‰ ëŒ€í™” í”Œë¡œìš° ë° ìƒíƒœ ê´€ë¦¬
- **4ê°€ì§€ ì§ˆë¬¸ ìë™ ë¶„ë¥˜**: ë‚™ë† ì§€ì‹, ë†ì¥ ë°ì´í„°, ì¼ë°˜ ëŒ€í™”, ë¬´ê´€í•œ ì§ˆë¬¸
- **OpenAI GPT-4o-mini ì—”ì§„**: ìµœì‹  AI ëª¨ë¸ë¡œ ì •í™•í•˜ê³  ìì—°ìŠ¤ëŸ¬ìš´ ì‘ë‹µ
- **í•œêµ­ì–´ ì „ìš© ë‚™ë†ì—… íŠ¹í™”**: ë‚™ë†ì—… ì „ë¬¸ìš©ì–´ì™€ ë†ì¥ í™˜ê²½ì— ìµœì í™”
- **ë†ì¥ ë°ì´í„° ì‹¤ì‹œê°„ ì—°ë™**: ì‚¬ìš©ìì˜ ì –ì†Œ ì •ë³´ì™€ ê¸°ë¡ì„ í™œìš©í•œ ë§ì¶¤í˜• ë‹µë³€
- **ì±„íŒ…ë°© ê´€ë¦¬ ì‹œìŠ¤í…œ**: ê°œë³„ ëŒ€í™”ë°© ìƒì„±, ì´ë ¥ ê´€ë¦¬, ìë™ ì •ë¦¬
- **ë©”ëª¨ë¦¬ ê¸°ë°˜ ì—°ì† ëŒ€í™”**: ëŒ€í™” ë§¥ë½ì„ ìœ ì§€í•˜ëŠ” ì§€ëŠ¥í˜• ì‘ë‹µ ì‹œìŠ¤í…œ

#### ğŸ”— ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™ ê³ ë„í™”
- **5ë¶„ ìºì‹± ì‹œìŠ¤í…œ**: API ì‘ë‹µ ìºì‹œë¡œ ì„±ëŠ¥ ìµœì í™”
- **ë¹„ë™ê¸° ì²˜ë¦¬ ê°•í™”**: ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ìœ¼ë¡œ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- **ì˜¤ë¥˜ ì²˜ë¦¬ ê°œì„ **: ì¼ë¶€ API ì‹¤íŒ¨ ì‹œì—ë„ ê°€ìš©í•œ ì •ë³´ ìˆ˜ì§‘ ê³„ì†

#### ğŸ” ì‚¬ìš©ì ê´€ë¦¬ ê¸°ëŠ¥ í™•ì¥
- **ëª©ì¥ ì´ë¦„ ìˆ˜ì •**: ì‚¬ìš©ìê°€ ì§ì ‘ ëª©ì¥ ì´ë¦„ ë³€ê²½ ê°€ëŠ¥
- **í–¥ìƒëœ ì‚¬ìš©ì ê²€ì¦**: ì´ë¦„ê³¼ ì´ë©”ì¼ ê¸°ë°˜ ì•„ì´ë”” ì°¾ê¸° ì •í™•ë„ í–¥ìƒ
- **ë³´ì•ˆ í† í° ì‹œìŠ¤í…œ**: JWT ê¸°ë°˜ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë³´ì•ˆ ê°•í™”

### v2.6.3 (2025-06-25)
#### ğŸ¤– AI ì±—ë´‡ "ì†Œë‹´ì´" ì¶”ê°€
- **LangGraph ê¸°ë°˜ ëŒ€í™” ì‹œìŠ¤í…œ**: ê³ ë„í™”ëœ ëŒ€í™” í”Œë¡œìš° ê´€ë¦¬
- **ì§ˆë¬¸ ìë™ ë¶„ë¥˜**: ë‚™ë† ì§€ì‹, ë†ì¥ ë°ì´í„°, ì¼ë°˜ ëŒ€í™”, ë¬´ê´€í•œ ì§ˆë¬¸ ìë™ êµ¬ë¶„
- **OpenAI GPT-4o-mini**: ìµœì‹  AI ëª¨ë¸ í™œìš©ìœ¼ë¡œ ì •í™•í•œ ì‘ë‹µ ì œê³µ
- **í•œêµ­ì–´ ì „ìš©**: ë‚™ë†ì—… ì „ë¬¸ìš©ì–´ì— íŠ¹í™”ëœ í•œêµ­ì–´ ëŒ€í™” ì§€ì›
- API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
  - POST    /chatbot/ask
  - GET     /chatbot/rooms/{user_id}
  - POST    /chatbot/rooms
  - GET     /chatbot/history/{chat_id}
  - DELETE  /chatbot/rooms/{chat_id}
  - DELETE  /chatbot/rooms/expired/auto 

#### ğŸ” ì‚¬ìš©ì ê´€ë¦¬ ê¸°ëŠ¥ ê°•í™”
- **ëª©ì¥ ì´ë¦„ ìˆ˜ì • ê¸°ëŠ¥**: PUT /auth/update-farm-name ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
- **í–¥ìƒëœ ì‚¬ìš©ì ê²€ì¦**: ì´ë¦„ê³¼ ì´ë©”ì¼ ê¸°ë°˜ ì•„ì´ë”” ì°¾ê¸° ì •í™•ë„ í–¥ìƒ
- **ë³´ì•ˆ ê°•í™”**: í† í° ê¸°ë°˜ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì‹œìŠ¤í…œ ê°œì„ 

#### ğŸ”— ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™ ìµœì í™”
- **ìºì‹± ì‹œìŠ¤í…œ**: 5ë¶„ê°„ API ì‘ë‹µ ìºì‹œë¡œ ì„±ëŠ¥ í–¥ìƒ
- **í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸ í™•ì¥**: ê°œë°œì ì¹œí™”ì ì¸ ì¸ì¦ ë¶ˆí•„ìš” í…ŒìŠ¤íŠ¸ API ì¶”ê°€
- **ì˜¤ë¥˜ ì²˜ë¦¬ ê°œì„ **: ì¼ë¶€ API ì‹¤íŒ¨ ì‹œì—ë„ ë‚˜ë¨¸ì§€ ì •ë³´ ìˆ˜ì§‘ ê³„ì† ì§„í–‰

### v2.6.0 (2025-06-22)
#### ğŸ”— ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™ ê¸°ëŠ¥ ì¶”ê°€
- **ì –ì†Œ ë“±ë¡ ìƒíƒœ í™•ì¸**: `/cows/registration-status/{ear_tag_number}`
- **ì¶•ì‚°ë¬¼ì´ë ¥ì œ ê¸°ë°˜ ë“±ë¡**: `/cows/register-from-livestock-trace`
- **3ë‹¨ê³„ ë“±ë¡ í”Œë¡œìš°**: ì¶•ì‚°ë¬¼ì´ë ¥ì œ ìš°ì„  â†’ ìˆ˜ë™ ë“±ë¡ ëŒ€ì•ˆ
- **ì „ì²´ ì´ë ¥ì •ë³´ ì¡°íšŒ**: 7ê°œ ì˜µì…˜ë³„ ë°ì´í„° ìˆ˜ì§‘
- **ë¹„ë™ê¸° ì²˜ë¦¬**: ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”

#### ğŸ“Š ìƒì„¸ ê¸°ë¡ ê´€ë¦¬ ì‹œìŠ¤í…œ í™•ì¥
- **10ê°€ì§€ ìƒì„¸ ê¸°ë¡ ìœ í˜•**: ì°©ìœ , ë°œì •, ì¸ê³µìˆ˜ì •, ì„ì‹ ê°ì •, ë¶„ë§Œ, ì‚¬ë£Œê¸‰ì—¬, ê±´ê°•ê²€ì§„, ë°±ì‹ ì ‘ì¢…, ì²´ì¤‘ì¸¡ì •, ì¹˜ë£Œ
- **ì¹´í…Œê³ ë¦¬ë³„ ì¡°íšŒ API**: ê±´ê°•/ë²ˆì‹/ì‚¬ë£Œ ë“± ì¹´í…Œê³ ë¦¬ë³„ í•„í„°ë§
- **í†µê³„ ë° ë¶„ì„**: ì°©ìœ  í†µê³„, ì²´ì¤‘ ë³€í™” ì¶”ì´, ë²ˆì‹ íƒ€ì„ë¼ì¸
- **í”„ë¡ íŠ¸ì—”ë“œ ì „ìš© API**: Flutter ì•± ìµœì í™”ëœ ì—”ë“œí¬ì¸íŠ¸

#### ğŸ” ë³´ì•ˆ ë° ì¸ì¦ ê°•í™”
- **ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ê°œì„ **: JWT ê¸°ë°˜ í† í° ì‹œìŠ¤í…œ
- **ì„ì‹œ í† í° ë¡œê·¸ì¸**: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê¶Œí•œ ë¶„ë¦¬
- **íšŒì›íƒˆí‡´**: ê´€ë ¨ ë°ì´í„° ì™„ì „ ì‚­ì œ
- **ë¦¬í”„ë ˆì‹œ í† í° ê´€ë¦¬**: ë³´ì•ˆ ê°•í™”ëœ í† í° ë¬´íš¨í™”

### ìƒˆë¡œìš´ ì—”ë“œí¬ì¸íŠ¸ (v2.7.0)
#### AI ì±—ë´‡ ì™„ì „ì²´
- `POST /chatbot/ask`: **ì±—ë´‡ ì§ˆë¬¸í•˜ê¸°** (LangGraph + ë†ì¥ ë°ì´í„° ì—°ë™)
- `GET /chatbot/rooms/{user_id}`: **ì‚¬ìš©ì ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ**
- `POST /chatbot/rooms`: **ìƒˆë¡œìš´ ì±„íŒ…ë°© ìƒì„±**
- `GET /chatbot/history/{chat_id}`: **ì±„íŒ…ë°© ëŒ€í™” ì´ë ¥ ì¡°íšŒ**
- `DELETE /chatbot/rooms/{chat_id}`: **ì±„íŒ…ë°© ë° ë©”ì‹œì§€ ì‚­ì œ**
- `DELETE /chatbot/rooms/expired/auto`: **14ì¼ ì´ìƒëœ ì±„íŒ…ë°© ìë™ ì‚­ì œ**

#### ì‚¬ìš©ì ê´€ë¦¬
- `PUT /auth/update-farm-name`: ëª©ì¥ ì´ë¦„ ìˆ˜ì •

### ìƒˆë¡œìš´ ì—”ë“œí¬ì¸íŠ¸ (v2.6.0)
#### ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™
- `GET /cows/registration-status/{ear_tag_number}`: ë“±ë¡ ìƒíƒœ í™•ì¸
- `POST /cows/register-from-livestock-trace`: ì¶•ì‚°ë¬¼ì´ë ¥ì œ ê¸°ë°˜ ë“±ë¡
- `GET /cows/{cow_id}/livestock-trace-info`: ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì •ë³´ ì¡°íšŒ
- `GET /api/livestock-trace/livestock-trace/{ear_tag_number}`: ì „ì²´ ì´ë ¥ì •ë³´
- `GET /api/livestock-trace/livestock-quick-check/{ear_tag_number}`: ë¹ ë¥¸ í™•ì¸
- `POST /api/livestock-trace/livestock-trace-async/{ear_tag_number}`: ë¹„ë™ê¸° ì¡°íšŒ

#### ìƒì„¸ ê¸°ë¡ ê´€ë¦¬
- `POST /records/milking`: ì°©ìœ  ê¸°ë¡ ìƒì„±
- `POST /records/estrus`: ë°œì • ê¸°ë¡ ìƒì„±
- `POST /records/insemination`: ì¸ê³µìˆ˜ì • ê¸°ë¡ ìƒì„±
- `POST /records/pregnancy-check`: ì„ì‹ ê°ì • ê¸°ë¡ ìƒì„±
- `POST /records/calving`: ë¶„ë§Œ ê¸°ë¡ ìƒì„±
- `POST /records/feed`: ì‚¬ë£Œê¸‰ì—¬ ê¸°ë¡ ìƒì„±
- `POST /records/health-check`: ê±´ê°•ê²€ì§„ ê¸°ë¡ ìƒì„±
- `POST /records/vaccination`: ë°±ì‹ ì ‘ì¢… ê¸°ë¡ ìƒì„±
- `POST /records/weight`: ì²´ì¤‘ì¸¡ì • ê¸°ë¡ ìƒì„±
- `POST /records/treatment`: ì¹˜ë£Œ ê¸°ë¡ ìƒì„±

#### í†µê³„ ë° ë¶„ì„
- `GET /records/cow/{cow_id}/milking/statistics`: ì°©ìœ  í†µê³„
- `GET /records/cow/{cow_id}/weight/trend`: ì²´ì¤‘ ë³€í™” ì¶”ì´
- `GET /records/cow/{cow_id}/reproduction/timeline`: ë²ˆì‹ íƒ€ì„ë¼ì¸
- `GET /records/cow/{cow_id}/summary`: ì –ì†Œ ê¸°ë¡ ìš”ì•½

#### ì¹´í…Œê³ ë¦¬ë³„ ì¡°íšŒ
- `GET /records/cow/{cow_id}/health-records`: ê±´ê°• ê¸°ë¡
- `GET /records/cow/{cow_id}/breeding-records`: ë²ˆì‹ ê¸°ë¡
- `GET /records/cow/{cow_id}/feed-records`: ì‚¬ë£Œê¸‰ì—¬ ê¸°ë¡
- `GET /records/cow/{cow_id}/weight-records`: ì²´ì¤‘ì¸¡ì • ê¸°ë¡
- `GET /records/cow/{cow_id}/all-records`: ì „ì²´ ê¸°ë¡

#### ì¸ì¦ ë° ë³´ì•ˆ
- `POST /auth/login-with-reset-token`: ì„ì‹œ í† í° ë¡œê·¸ì¸
- `POST /auth/change-password`: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- `DELETE /auth/delete-account`: íšŒì›íƒˆí‡´

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: FastAPI 2.3.1 (Python 3.11+)
- **Database**: Firebase Firestore (NoSQL)
- **Authentication**: JWT (JSON Web Tokens) + SNS OAuth 2.0
- **Social Login**: Google (Firebase Admin SDK), Kakao API, Naver API
- **Validation**: Pydantic 2.11+ (ê°•í™”ëœ í•„ë“œ ê²€ì¦)
- **Password Hashing**: bcrypt
- **Email Service**: AWS SES / Gmail SMTP
- **External API**: ì¶•ì‚°ë¬¼í’ˆì§ˆí‰ê°€ì› OpenAPI

### AI & Machine Learning
- **AI Framework**: LangGraph (ëŒ€í™” í”Œë¡œìš° ê´€ë¦¬)
- **LLM**: OpenAI GPT-4o-mini
- **Natural Language**: í•œêµ­ì–´ ë‚™ë†ì—… ì „ë¬¸ ëŒ€í™” ì‹œìŠ¤í…œ
- **Vector Database**: Chroma (RAG ê¸°ë°˜ ì§€ì‹ ê²€ìƒ‰)
- **Embedding**: OpenAI Embeddings

### Infrastructure
- **Deployment**: AWS EC2 (Ubuntu)
- **CI/CD**: GitHub Actions
- **Process Management**: tmux
- **Web Server**: uvicorn (ASGI)
- **Environment**: Python venv

### ì™¸ë¶€ ì—°ë™
- **ì¶•ì‚°ë¬¼ì´ë ¥ì œ**: ì¶•ì‚°ë¬¼í’ˆì§ˆí‰ê°€ì› (EKAPE) OpenAPI
- **API ë°©ì‹**: REST API (XML ì‘ë‹µ)
- **ì¡°íšŒ ì •ë³´**: 7ê°€ì§€ ì˜µì…˜ (ê¸°ë³¸ì •ë³´, ë†ì¥ì´ë ¥, ë„ì¶•ì •ë³´, ë°±ì‹ ì •ë³´ ë“±)

## ğŸ” ë¬¸ì œ í•´ê²°

### API ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­

#### 1. ì¸ì¦ í† í° ê´€ë¦¬
- Access Token ë§Œë£Œ ì‹œê°„: 30ë¶„
- Refresh Tokenì„ ì‚¬ìš©í•˜ì—¬ ê°±ì‹  í•„ìš”
- ë¡œê·¸ì•„ì›ƒ ì‹œ í† í° ì‚­ì œ ê¶Œì¥

#### 2. ë°ì´í„° ê²€ì¦
- **ë‚ ì§œ í˜•ì‹**: YYYY-MM-DD
- **ì‹œê°„ í˜•ì‹**: HH:MM:SS ë˜ëŠ” HH:MM
- **ì´í‘œë²ˆí˜¸**: 12ìë¦¬ ìˆ«ì (002ë¡œ ì‹œì‘)
- **ì°©ìœ ëŸ‰**: 0ë³´ë‹¤ í° ê°’ (ë¦¬í„° ë‹¨ìœ„)

#### 3. ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì—°ë™
- **API í‚¤ ì„¤ì •**: `LIVESTOCK_TRACE_API_DECODING_KEY` í™˜ê²½ë³€ìˆ˜ í•„ìˆ˜
- **ì´í‘œë²ˆí˜¸ í˜•ì‹**: ì •í™•íˆ 12ìë¦¬ ìˆ«ì
- **ì‘ë‹µ ì‹œê°„**: ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ì„±ëŠ¥ ìµœì í™”
- **ì˜¤ë¥˜ ì²˜ë¦¬**: ì¼ë¶€ API ì‹¤íŒ¨í•´ë„ ë‚˜ë¨¸ì§€ ì •ë³´ ìˆ˜ì§‘ ê³„ì†
- **ìºì‹±**: 5ë¶„ê°„ API ì‘ë‹µ ìºì‹œë¡œ ë¶ˆí•„ìš”í•œ í˜¸ì¶œ ë°©ì§€

#### 4. SNS ë¡œê·¸ì¸ ì„¤ì •
- **Google**: Firebase í”„ë¡œì íŠ¸ì˜ Admin SDK í‚¤ íŒŒì¼ (`firebase-adminsdk.json`) í•„ìš”
- **Kakao**: í´ë¼ì´ì–¸íŠ¸ì¸¡ì—ì„œ ì•¡ì„¸ìŠ¤ í† í° íšë“ í›„ ì„œë²„ë¡œ ì „ë‹¬
- **Naver**: í™˜ê²½ë³€ìˆ˜ í•„ìˆ˜ - `NAVER_CLIENT_ID`, `NAVER_CLIENT_SECRET`
- **ìë™ ì‚¬ìš©ì ìƒì„±**: ì²« ë¡œê·¸ì¸ ì‹œ ì‚¬ìš©ì ë° ë†ì¥ ì •ë³´ ìë™ ìƒì„±
- **í† í° ê²€ì¦**: ê° í”Œë«í¼ì˜ APIë¥¼ í†µí•´ ì•¡ì„¸ìŠ¤ í† í° ìœ íš¨ì„± ì‹¤ì‹œê°„ ê²€ì¦
- **JWT ë°œê¸‰**: SNS ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ìì²´ JWT í† í° ìë™ ë°œê¸‰

#### 5. AI ì±—ë´‡ ì‚¬ìš©
- **OpenAI API í‚¤**: `OPENAI_API_KEY` í™˜ê²½ë³€ìˆ˜ í•„ìˆ˜
- **ì§ˆë¬¸ ì–¸ì–´**: í•œêµ­ì–´ ê¶Œì¥ (ë‚™ë†ì—… ì „ë¬¸ìš©ì–´ íŠ¹í™”)
- **ì‘ë‹µ ì‹œê°„**: ì¼ë°˜ì ìœ¼ë¡œ 2-5ì´ˆ ì†Œìš”
- **ì§ˆë¬¸ ë¶„ë¥˜**: ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ì ì ˆí•œ ì‘ë‹µ ê²½ë¡œ ì„ íƒ
- **ì´í‘œë²ˆí˜¸ ì¸ì‹**: 12ìë¦¬ ìˆ«ì íŒ¨í„´ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ì—¬ ë†ì¥ ë°ì´í„° ì¡°íšŒ
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ì±„íŒ…ë°©ë³„ ëŒ€í™” ë§¥ë½ ìœ ì§€, 14ì¼ í›„ ìë™ ì •ë¦¬

#### 6. ì—ëŸ¬ ì²˜ë¦¬
```typescript
// í‘œì¤€ ì—ëŸ¬ ì‘ë‹µ í˜•íƒœ
interface ApiError {
  detail: string;
  status_code: number;
}

// SNS ë¡œê·¸ì¸ ì—ëŸ¬ ì²˜ë¦¬ ì˜ˆì‹œ
interface SNSLoginError {
  detail: string;
  status_code: number;
  provider: string; // "google" | "kakao" | "naver"
}

try {
  const response = await fetch('/sns/google/login', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      access_token: 'google_access_token_here'
    })
  });
  
  if (!response.ok) {
    const error: SNSLoginError = await response.json();
    console.error('SNS Login Error:', error.detail);
    // í† í° ë§Œë£Œë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ í† í° ì²˜ë¦¬
  }
  
  const result = await response.json();
  console.log('ë¡œê·¸ì¸ ì„±ê³µ:', result.access_token);
} catch (error) {
  console.error('Network Error:', error);
}

// AI ì±—ë´‡ ì—ëŸ¬ ì²˜ë¦¬ ì˜ˆì‹œ
try {
  const response = await fetch('/chatbot/ask', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      user_id: 'user123',
      chat_id: 'chat-uuid-123', 
      question: 'ì –ì†Œ ë°œì • ì¦ìƒì´ ë­”ê°€ìš”?'
    })
  });
  
  if (!response.ok) {
    const error: ApiError = await response.json();
    console.error('Chatbot API Error:', error.detail);
  }
  
  const result = await response.json();
  console.log('AI ì‘ë‹µ:', result.answer);
} catch (error) {
  console.error('Network Error:', error);
}
```

## ğŸš€ ë°°í¬

### GitHub Actions ìë™ ë°°í¬
1. **íŠ¸ë¦¬ê±°**: `main` ë¸Œëœì¹˜ í‘¸ì‹œ ì‹œ ìë™ ì‹¤í–‰
2. **ë°°í¬ ê³¼ì •**:
   - ì½”ë“œ ì—…ë°ì´íŠ¸ (`git pull origin main`)
   - ì˜ì¡´ì„± ì„¤ì¹˜ (`pip install -r requirements.txt`)
   - í™˜ê²½ë³€ìˆ˜ ìë™ ì„¤ì •
   - ì„œë²„ ì¬ì‹œì‘ (tmux session)
   - í—¬ìŠ¤ì²´í¬ í™•ì¸

## ğŸ“ ì§€ì› ë° ì—°ë½ì²˜

### ê¸°ìˆ  ì§€ì›
- **GitHub**: [BlackCows-Team/blackcows-server](https://github.com/BlackCows-Team/blackcows-server)
- **Issues**: [GitHub Issues](https://github.com/BlackCows-Team/blackcows-server/issues)
- **ì´ë©”ì¼**: team@blackcowsdairy.com

## ğŸ”„ API ì‚¬ìš© íŒ¨í„´

### 1. ì –ì†Œ ë“±ë¡ ì›Œí¬í”Œë¡œìš°
```
ì‚¬ìš©ì ì…ë ¥: ì´í‘œë²ˆí˜¸
     â†“
ë“±ë¡ ìƒíƒœ í™•ì¸ API
     â†“
â”Œâ”€ ì´ë¯¸ ë“±ë¡ë¨ â†’ ì˜¤ë¥˜ ë©”ì‹œì§€
â”œâ”€ ì¶•ì‚°ë¬¼ì´ë ¥ì œ ì •ë³´ ìˆìŒ â†’ ìë™ ë“±ë¡
â””â”€ ì •ë³´ ì—†ìŒ â†’ ìˆ˜ë™ ë“±ë¡
     â†“
ë“±ë¡ ì™„ë£Œ â†’ ì –ì†Œ ëª©ë¡ ì¡°íšŒ
```

### 2. ê¸°ë¡ ê´€ë¦¬ ì›Œí¬í”Œë¡œìš°
```
ê¸°ë¡ ìœ í˜• ì„ íƒ (ì°©ìœ /ë°œì •/ì¹˜ë£Œ ë“±)
     â†“
ì –ì†Œ ì„ íƒ
     â†“
ê¸°ë¡ ë°ì´í„° ì…ë ¥
     â†“
ê¸°ë¡ ìƒì„± API í˜¸ì¶œ
     â†“
ì„±ê³µ â†’ ê¸°ë¡ ëª©ë¡ ì—…ë°ì´íŠ¸
```

### 3. AI ì±—ë´‡ ì‚¬ìš© íŒ¨í„´
```
ì‚¬ìš©ì ì§ˆë¬¸ ì…ë ¥
     â†“
LangGraph ì§ˆë¬¸ ë¶„ë¥˜ ì‹œìŠ¤í…œ
     â†“
â”Œâ”€ ë‚™ë† ì§€ì‹ â†’ RAG ê²€ìƒ‰ â†’ ì „ë¬¸ ë‹µë³€
â”œâ”€ ë†ì¥ ë°ì´í„° â†’ ì –ì†Œ ì •ë³´ ì¡°íšŒ â†’ ë§ì¶¤ ë‹µë³€  
â”œâ”€ ì¼ë°˜ ëŒ€í™” â†’ ë©”ëª¨ë¦¬ ê¸°ë°˜ â†’ ìì—°ìŠ¤ëŸ¬ìš´ ì‘ë‹µ
â””â”€ ë¬´ê´€í•œ ì§ˆë¬¸ â†’ ì•ˆë‚´ ë©”ì‹œì§€
     â†“
ì‘ë‹µ ìƒì„± + ëŒ€í™” ì´ë ¥ ì €ì¥
     â†“
ì—°ì† ëŒ€í™” ì§€ì› (ë©”ëª¨ë¦¬ ìœ ì§€)
```

### 4. AI ì±—ë´‡ ê³ ê¸‰ í™œìš©
```javascript
// ë†ì¥ ë°ì´í„° ì—°ë™ ì§ˆë¬¸ ì˜ˆì‹œ
const farmDataQuestions = [
  "002123456789ë²ˆ ì†Œ ìµœê·¼ ì°©ìœ ëŸ‰ ì–´ë–»ê²Œ ë¼?",
  "ì–´ì œ ë¶„ë§Œí•œ ì†Œë“¤ ìˆì–´?", 
  "ê±´ê°• ê²€ì§„ì´ í•„ìš”í•œ ì†Œ ì•Œë ¤ì¤˜",
  "ë°œì •ê¸°ì¸ ì†Œë“¤ í˜„í™© ë³´ì—¬ì¤˜"
];

// ë‚™ë† ì§€ì‹ ì§ˆë¬¸ ì˜ˆì‹œ  
const knowledgeQuestions = [
  "ì –ì†Œ ë°œì • ì£¼ê¸°ëŠ” ì–¼ë§ˆë‚˜ ë¼?",
  "ì°©ìœ ê¸° ì²­ì†ŒëŠ” ì–´ë–»ê²Œ í•´ì•¼ í•´?",
  "ì†¡ì•„ì§€ ì´ìœ ì‹ì€ ì–¸ì œë¶€í„° ì¤˜ì•¼ í•´?",
  "ìœ ë°©ì—¼ ì¦ìƒì´ ë­ì•¼?"
];

// ì—°ì† ëŒ€í™” ì˜ˆì‹œ
async function chatWithSodam() {
  // 1. ì²« ë²ˆì§¸ ì§ˆë¬¸
  await askChatbot("ì –ì†Œ ë°œì • ì¦ìƒì´ ë­ì•¼?");
  
  // 2. í›„ì† ì§ˆë¬¸ (ì´ì „ ë§¥ë½ ìœ ì§€)
  await askChatbot("ê·¸ëŸ¼ ë°œì • í™•ì¸ì€ ì–´ë–»ê²Œ í•´?");
  
  // 3. ë†ì¥ ë°ì´í„°ì™€ ì—°ê²°
  await askChatbot("ìš°ë¦¬ ë†ì¥ì—ì„œ ë°œì •ê¸°ì¸ ì†Œ ìˆì–´?");
}
```

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” [MIT ë¼ì´ì„ ìŠ¤](LICENSE) í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

```
MIT License

Copyright (c) 2025 BlackCows Team

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

**ê°œë°œíŒ€**: BlackCows Team  
**ë²„ì „**: v2.7.0 
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025ë…„ 6ì›” 27ì¼
